# Ansible Configuration for Hyperion Fleet Manager
# Windows Server Fleet Management Configuration
#
# This configuration is optimized for managing large-scale Windows server fleets
# in AWS environments using WinRM for connectivity.

[defaults]
# Inventory configuration
inventory = ./inventories

# Playbook directory
playbook_dir = ./playbooks

# Roles path for custom and galaxy roles
roles_path = ./roles:~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles

# Module path for custom modules
library = ../modules/ansible

# Default remote user for SSH connections (Linux jump hosts)
remote_user = ansible

# Disable SSH host key checking for dynamic cloud environments
# Note: In production, consider using known_hosts management
host_key_checking = False

# Increase default timeout for Windows operations
timeout = 60

# Forks for parallel execution (adjust based on environment)
forks = 25

# Retry files location (keep workspace clean)
retry_files_enabled = True
retry_files_save_path = ~/.ansible/retry

# Log output to file for audit trail
log_path = /var/log/ansible/hyperion-fleet-manager.log

# Fact caching for performance optimization
gathering = smart
fact_caching = jsonfile
fact_caching_connection = ~/.ansible/fact_cache
fact_caching_timeout = 3600

# Display callback configuration
stdout_callback = yaml
callback_whitelist = profile_tasks, timer, mail

# Vault password file (optional - use with caution)
# vault_password_file = ~/.ansible/vault_password

# Enable diff mode by default for visibility
diff_mode = True

# Interpreter discovery for Windows
interpreter_python = auto_silent

# Default strategy
strategy = linear

# Error handling
any_errors_fatal = False
max_fail_percentage = 0

[inventory]
# Enable inventory plugins
enable_plugins = aws_ec2, ini, yaml, host_list

# Ignore file patterns
ignore_patterns = *.retry, *~, .git

[privilege_escalation]
# Default privilege escalation settings
become = False
become_method = runas
become_user = Administrator
become_ask_pass = False

[ssh_connection]
# SSH connection settings for Linux jump hosts
ssh_args = -C -o ControlMaster=auto -o ControlPersist=60s
pipelining = True
control_path = /tmp/ansible-%%h-%%p-%%r

[paramiko_connection]
# Paramiko settings for SSH fallback
record_host_keys = False

[winrm]
# WinRM connection settings for Windows hosts
operation_timeout_sec = 60
read_timeout_sec = 120

[persistent_connection]
# Persistent connection settings
connect_timeout = 60
command_timeout = 60
connect_retry_timeout = 15

[colors]
# Color settings for terminal output
highlight = white
verbose = blue
warn = bright purple
error = red
debug = dark gray
deprecate = purple
skip = cyan
unreachable = red
ok = green
changed = yellow
diff_add = green
diff_remove = red
diff_lines = cyan

[diff]
# Diff settings
always = True
context = 3

[galaxy]
# Ansible Galaxy settings
server_list = release_galaxy

[galaxy_server.release_galaxy]
url = https://galaxy.ansible.com/

[callback_profile_tasks]
# Profile tasks callback settings
task_output_limit = 100
sort_order = descending

[callback_timer]
# Timer callback settings (shows playbook execution time)

[selinux]
# SELinux settings (for Linux jump hosts)
special_context_filesystems = nfs,vboxsf,fuse,ramfs,9p,vfat
